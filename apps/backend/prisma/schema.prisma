// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Wallpaper {
  id          String   @id @default(cuid())
  name        String?
  url         String
  description String?
  externalUrl String?
  channel     String   @default("HUMAN") // "HUMAN" or "AI"
  releaseDate DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Rich Metadata
  artist         String?
  creationDate   String?   // Free text: "1889", "19th Century"
  genre          String?   // "Landscape", "Portrait"
  movement       String?   // "Impressionism", "Baroque"
  dominantColors String[]  // Array of hex codes: ["#FF0000", "#00FF00"]
  tags           String[]  // Keywords for search

  // Discriminator & Mobile Support
  type           WallpaperType     @default(DESKTOP)
  collectionId   String?
  collection     MobileCollection? @relation(fields: [collectionId], references: [id])
  collectionOrder Int              @default(0)
}

enum WallpaperType {
  DESKTOP
  MOBILE
}

model MobileCollection {
  id          String      @id @default(cuid())
  name        String
  slug        String      @unique
  description String?
  coverImage  String
  isPublished Boolean     @default(true)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  
  channel     String      @default("HUMAN") // "HUMAN" or "AI"
  order       Int         @default(0)
  
  wallpapers  Wallpaper[]
}

model DeviceToken {
  id        String   @id @default(cuid())
  token     String   @unique
  schedule  Int      @default(9) // Hour of day (0-23)
  timezone  String   @default("UTC")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
